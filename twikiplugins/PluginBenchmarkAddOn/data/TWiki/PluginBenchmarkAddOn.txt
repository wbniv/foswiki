%META:TOPICINFO{author="PeterThoeny" date="1159213083" format="1.0" version="1.2"}%
---+ Plugin Benchmark Add-On

This is a small script to measure the performance of a Plugin. Plugin authors can use it to measure and document the TWiki:Plugins/Benchmark numbers.

---++ Usage

	* Specify Plugin name and other topics to benchmark. The first parameter is the Plugin name, followed by topic names. The TWiki web is assumed unless specified.
	* Example: %BR% =% ./pluginbenchmark <nop>TablePlugin <nop>GoodStyle <nop>FormattedSearch <nop>Main.TWikiUsers=

__Notes:__
	* Before running the benchmarks, disable mod_perl or <nop>SpeedyCGI in case used
	* Run utility on web server's shell where TWiki is installed
	* Measure when there is no load on the server
	* All Plugins are automatically disabled except for the <nop>DefaultPlugin and the specified Plugin. The classic TWiki skin is enabled

---++ Example output

<verbatim>
% ./pluginbenchmark SpreadSheetPlugin FormattedSearch GoodStyle
TWiki Plugin benchmark tool. Time::HiRes is used.
Measuring, please be patient...
Topic:								  Without:  With:	  Percent:
------------------------------  --------  --------  --------
TWiki.SpreadSheetPlugin				0.481	  0.506		 95%
TWiki.FormattedSearch				  1.677	  1.694		 99%
TWiki.GoodStyle						  0.301	  0.304		 99%
</verbatim>

---++ Add-On Installation Instructions

__Note:__ You do not need to install anything on the browser to use this add-on. The following instructions are for the administrator who installs the add-on on the server where TWiki is running. 

	* Download the ZIP file from the Add-on Home (see below)
	* Unzip ==%TOPIC%.zip== in your twiki installation directory. Content:
	  | *File:* | *Description:* |
	  | ==data/TWiki/%TOPIC%.txt== | Add-on topic |
	  | ==data/TWiki/%TOPIC%.txt,v== | Plugin topic repository |
	  | ==bin/pluginbenchmark== | Benchmark utility script |
	* Patch TWiki::Plugins if needed:
		* Currently activated Plugins: %ACTIVATEDPLUGINS%
		* [[%SCRIPTURL%/view%SCRIPTSUFFIX%/%WEB%/%TOPIC%?debugenableplugins=DefaultPlugin][Test]] if above list shows only the =DefaultPlugin=
		* In case not, apply the TWiki:Codev/DebugEnablePlugins patch. This allows one to enable and disable installed Plugins with a =debugenableplugins= URL parameter
	* Configure the utility script:
		* Edit =bin/pluginbenchmark= and set the variables on top to reflect your environment
	* Install CPAN:Time::HiRes if needed:
		* Run the pluginbenchmark utility from the shell without parameters, it will tell you if Time::HiRes is installed or not.
		* It is strongly recommended to run the utility only with Time::HiRes installed (it will work without the module, but it is very slow and the result is not accurate)
	* Test if the installation was successful:
		* Run the pluginbenchmark utility from the shell: %BR%
		  =% ./pluginbenchmark <nop>TablePlugin <nop>GoodStyle=

---++ Add-On Info

	* Set SHORTDESCRIPTION = Measure the performance of a TWiki plugin

|  Add-on Author: | TWiki:Main.PeterThoeny |
|  Copyright: | &copy; 2006, TWiki:Main.PeterThoeny |
|  License: | GPL ([[http://www.gnu.org/copyleft/gpl.html][GNU General Public License]]) |
|  Add-on Version: | 11 Nov 2004 (v1.000) |
|  Change History: | <!-- versions below in reverse order -->&nbsp; |
|  11 Nov 2004: | Better accuracy, more flexible configuration |
|  10 Nov 2004: | Initial version |
|  TWiki Dependency: | $TWiki::Plugins::VERSION 1.1 (TWiki 4.0) |
|  CPAN Dependencies: | Time::HiRes |
|  Other Dependencies: | TWiki's geturl utility |
|  Perl Version: | 5.005 |
|  Add-on Home: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC% |
|  Feedback: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%Dev |
|  Appraisal: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%Appraisal |

__Related Topic:__ %SYSTEMWEB%.TWikiAddOns

-- TWiki:Main/PeterThoeny - 11 Nov 2004

